---
title: Source Attribution
description: Approaches for displaying source citations in AI agent responses — inline, sidebar, and drawer patterns.
---

# Source Attribution

Transparency is critical for AI agent interfaces in government. Users must be able to verify information by checking the sources. This guide covers three approaches to displaying source citations.

## Why source attribution matters

- **Trust**: Users are more likely to trust AI responses when they can verify the information.
- **Accountability**: Digital services must be traceable to authoritative sources.
- **Compliance**: Many councils require that AI-generated answers cite official documents.

## Inline sources

Sources are displayed directly below the agent message as compact cards.

### When to use

- Chat interfaces where the conversation is the primary focus
- Mobile layouts with limited screen space
- Simple Q&A interactions with one or two sources

### Implementation

```tsx
import { AgentChat, SourceCard } from '@surf-kit/agent';

function InlineSources({ message }) {
  return (
    <div>
      <div className="prose">{message.content}</div>
      {message.sources?.length > 0 && (
        <div className="mt-3 flex flex-col gap-2">
          <p className="text-sm text-muted-foreground">Sources:</p>
          {message.sources.map((source, i) => (
            <SourceCard
              key={source.url}
              title={source.title}
              url={source.url}
              snippet={source.snippet}
              relevance={source.relevance}
              index={i + 1}
              isCompact
            />
          ))}
        </div>
      )}
    </div>
  );
}
```

### Pros and cons

- Keeps sources close to the answer they support.
- Can clutter the message stream with many sources.
- Works well on mobile.

## Sidebar sources

Sources are displayed in a persistent sidebar next to the chat, with numbered references linking to the sidebar.

### When to use

- Desktop layouts with sufficient screen width
- Research-oriented interfaces where source exploration is important
- Dashboards where users need to compare multiple sources

### Implementation

```tsx
import { AgentChat, SourceCard } from '@surf-kit/agent';

function ChatWithSidebar() {
  const [selectedSource, setSelectedSource] = React.useState(null);
  const { messages, sendMessage } = useAgentConnection({ endpoint: '/api/agent' });

  const allSources = messages
    .filter((m) => m.role === 'agent')
    .flatMap((m) => m.sources ?? []);

  return (
    <div className="flex h-screen">
      <div className="flex-1">
        <AgentChat
          layout="panel"
          messages={messages}
          onSendMessage={sendMessage}
          agentName="Research Assistant"
        />
      </div>
      <aside className="w-80 border-l overflow-y-auto p-4">
        <h2 className="text-sm font-semibold mb-3">Sources</h2>
        {allSources.map((source, i) => (
          <SourceCard
            key={source.url}
            title={source.title}
            url={source.url}
            snippet={source.snippet}
            relevance={source.relevance}
            index={i + 1}
          />
        ))}
      </aside>
    </div>
  );
}
```

### Numbered references

In the message content, reference numbers link to the sidebar:

```tsx
function MessageWithReferences({ content, sources }) {
  // Replace [1], [2] etc. with clickable links
  const formatted = content.replace(/\[(\d+)\]/g, (match, num) => {
    const source = sources[parseInt(num) - 1];
    return source
      ? `<a href="${source.url}" class="text-accent underline" aria-label="Source ${num}: ${source.title}">[${num}]</a>`
      : match;
  });

  return <div dangerouslySetInnerHTML={{ __html: formatted }} />;
}
```

### Pros and cons

- Excellent for research and exploration.
- Requires sufficient screen width (>1024px recommended).
- Sources persist and accumulate across the conversation.

## Drawer sources

Sources are hidden by default and revealed in a slide-out drawer when the user clicks a "View sources" button.

### When to use

- When screen space is limited but detailed source information is still needed
- Mobile-responsive layouts that need both inline and detailed views
- When sources are optional context rather than essential verification

### Implementation

```tsx
import { AgentChat, SourceCard } from '@surf-kit/agent';
import { Sheet } from '@surf-kit/core';

function ChatWithDrawer() {
  const [drawerOpen, setDrawerOpen] = React.useState(false);
  const [drawerSources, setDrawerSources] = React.useState([]);

  const handleViewSources = (sources) => {
    setDrawerSources(sources);
    setDrawerOpen(true);
  };

  return (
    <>
      <AgentChat
        layout="full-page"
        messages={messages}
        onSendMessage={sendMessage}
        agentName="Council Assistant"
      />
      <Sheet
        isOpen={drawerOpen}
        onClose={() => setDrawerOpen(false)}
        title="Sources"
        side="right"
      >
        <div className="flex flex-col gap-3 p-4">
          {drawerSources.map((source, i) => (
            <SourceCard
              key={source.url}
              title={source.title}
              url={source.url}
              snippet={source.snippet}
              relevance={source.relevance}
              index={i + 1}
            />
          ))}
        </div>
      </Sheet>
    </>
  );
}
```

### Pros and cons

- Keeps the main interface clean.
- Sources are one click away, which adds friction.
- Works well across all screen sizes.

## Choosing an approach

| Approach | Best for | Screen size | Source count |
| --- | --- | --- | --- |
| Inline | Simple Q&A | Any | 1–3 |
| Sidebar | Research | Desktop (>1024px) | Many |
| Drawer | Balanced | Any | Any |

## Accessibility

- All approaches must ensure source links are focusable and have descriptive `aria-label` values.
- Numbered references should be real links, not styled spans.
- The drawer/sheet must trap focus when open and return focus on close.
- Source relevance scores must not rely solely on colour — include text labels.
- Test with keyboard-only navigation to ensure all sources are reachable.
